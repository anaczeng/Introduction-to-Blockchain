#### 3.3.1 POS的诞生与发展

POS最初是作为POW的低能耗替代方案诞生的。比特币社区的人们很早就预见到POW的挖矿方案会动用大量的计算能力做无用功，并因此产生可观的能源消耗（具体解释请参考5.X.X节）。去中心化的加密货币能否不需要或者降低能源消耗来维持？这是新一代方案需要解决的问题。2011年，Sunny.King等人注意到"币龄（Coin Age）"的概念，并经过一年的时间开发出了以POW和POS方式混合挖矿的PPCoin（Peer-to-Peer Coin：点点币）系统；这是POS的首次亮相。从长远来看，该系统能将POW的能耗降低接近为零。此后有大量采用或纯POS的系统上线，它们或加快了出块速度或添加了其他先进功能。以太坊的Casper（Casper the friendly ghost：友善小精灵）是POW协议的POS变种，具体介绍请参见第六章。

![](/assets/table3-17.png)

_表3-17：采用或纯POS的部分代表系统。其中Ethereum将在它Serenity时期从POW转为POS。 _

#### 3.3.2 POS方案

引用POW的概念，POS是证明者向验证者证明她对币的所有权，从而引申到她对系统的股权。假设系统是一个公司，你对该系统币拥有的越多相当于拥有一个公司的股权越多，你就越不希望该系统崩溃——公司破产；此外，POS的激励机制是基于投入的币成比例回馈的，这也和公司股权机制类似。

在交易中消耗币龄可以看作POS的一种形式，这是PPCoin所采用的形式；而在Blackcoin中消耗的是币额；为了一般化，接下去的陈述将这些币的属性（币龄，币额）统称为股权。此外，因为PPCoin是POS的起源，Blackcoin对PPCoin的POS潜在威胁做了优化；其他系统在此基础上大同小异，所以本节将揉合提取PPCoin和Blackcoin的精髓对POS进行介绍。

**币龄（Coin Age）**是货币额度与持有时间的乘积。它在2010年由中本聪提出，用于确定比特币交易的优先级；后被Sunny.King等人用于PPCoin系统分配POW和POS在挖矿中的权重。

> 定义：
>
> 币龄＝币额X持有时间
>
> 币龄单位：币天数和币年数

消耗币龄的例子：

> 子贡获得了50枚币，持有了365天；他拥有的币龄为18,250币天数，也即是50币年数。子贡在交易中将10个币转给了钱庄，10个币转回给了自己；那么他剩下40枚币，而剩下的币龄只有30币年数了。

采用POS的系统在起步阶段一般都用POW挖矿；在币达到一定量后开始采用POW&POS混合或纯POS挖矿，所以它们有两类区块：POW区块和POS区块。POW区块的激励机制与比特币的类似，基于工作量奖励矿工；而POS区块则是基于投入的股权奖励矿工。

POS低耗能的核心思想就是用股权（例如币龄，币额等）成比例地抵掉哈希运算工作，例如PPCoin一秒一个未花的钱包输出（币龄）抵掉一个哈希运算。某种意义上，这是之前哈希运算工作量的复用，因为一开始挖矿（也即是铸币）过程是纯POW的。通过下面三个挖矿过程的对比，你会明白“哲学地说，币是工作量证明的一种形式，所以它可以替换掉工作量证明”。

![](/assets/ffig-3-13.png)

_图3-13：三种挖矿过程的输入输出对比。_

#### 3.3.3 POW方案 V.S. POS方案

POS方案因为复用了工作量，所以相比POW方案大大降低了能耗——这也是它产生的初衷。此外，它更能抵挡51％的攻击：一是因为控制51％以上的股权比控制51％的计算能力要难，要么花费大量的时间，要么花费大量的金钱；二是因为攻击本身就要消耗股权，这不像计算能力能再用。

然而，POS方案也有它的局限性，例如诚实节点滥用股权，提前计算（Precomputation），长距攻击（Long Range Attack）等。感兴趣的读者可以查阅黑币白皮书。



